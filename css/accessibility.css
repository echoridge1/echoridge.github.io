/* ============================================
   Echo Ridge Retreat - Accessibility CSS
   WCAG 2.1 Level AA compliant styles
   ============================================ */

/* ============================================
   Skip to Main Content Link
   ============================================ */

.skip-link {
  position: absolute;
  top: -100px;
  left: 0;
  background-color: var(--color-slate-blue);
  color: var(--color-white);
  padding: var(--spacing-sm) var(--spacing-md);
  text-decoration: none;
  font-weight: 600;
  z-index: 1000;
  border-radius: 0 0 var(--radius-sm) 0;
  transition: top var(--transition-fast);
}

.skip-link:focus {
  top: 0;
  outline: 3px solid var(--color-sage-green);
  outline-offset: 3px;
}

/* ============================================
   Enhanced Focus Indicators
   ============================================ */

/* Override default focus styles with high-contrast indicators */
a:focus-visible,
button:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible,
[tabindex]:focus-visible {
  outline: 3px solid var(--color-slate-blue);
  outline-offset: 2px;
  border-radius: var(--radius-sm);
}

/* Special focus for buttons */
.button:focus-visible {
  outline: 3px solid var(--color-slate-blue);
  outline-offset: 3px;
}

.button-primary:focus-visible {
  outline-color: var(--color-slate-blue);
}

.button-secondary:focus-visible {
  outline-color: var(--color-sage-green);
}

/* Focus within (for containers like cards) */
.card:focus-within {
  outline: 2px solid var(--color-slate-blue);
  outline-offset: 4px;
}

/* ============================================
   Screen Reader Only Content
   ============================================ */

.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

/* Allow screen reader content to be focusable when navigated to via keyboard */
.sr-only-focusable:active,
.sr-only-focusable:focus {
  position: static;
  width: auto;
  height: auto;
  overflow: visible;
  clip: auto;
  white-space: normal;
}

/* ============================================
   High Contrast Mode Support
   ============================================ */

/* Windows High Contrast Mode support */
@media (prefers-contrast: high) {
  .button {
    border-width: 3px;
  }

  a {
    text-decoration: underline;
  }

  .card {
    border: 2px solid currentColor;
  }

  input,
  select,
  textarea {
    border-width: 3px;
  }
}

/* ============================================
   Reduced Motion Support
   ============================================ */

/* Respect user's motion preferences */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  .hero {
    animation: none;
  }

  .card:hover {
    transform: none;
  }

  .button:hover {
    transform: none;
  }

  .social-link:hover {
    transform: none;
  }
}

/* ============================================
   Color Contrast Validation
   ============================================ */

/* Ensure minimum 4.5:1 contrast ratio for normal text */
/* Ensure minimum 3:1 contrast ratio for large text (18pt+) and UI components */

/* Text on sage green background */
.bg-sage {
  color: var(--color-white);
}

.bg-sage a {
  color: var(--color-white);
  text-decoration: underline;
}

.bg-sage a:hover {
  color: var(--color-soft-cream);
}

/* Text on charcoal background */
.bg-charcoal {
  color: var(--color-soft-cream);
}

.bg-charcoal a {
  color: var(--color-soft-cream);
  text-decoration: underline;
}

.bg-charcoal a:hover {
  color: var(--color-white);
}

/* Text on slate blue background */
.bg-slate {
  color: var(--color-white);
}

.bg-slate a {
  color: var(--color-white);
  text-decoration: underline;
}

.bg-slate a:hover {
  color: var(--color-soft-cream);
}

/* ============================================
   Keyboard Navigation Enhancements
   ============================================ */

/* Make clickable elements easily identifiable during keyboard navigation */
a[href],
button,
input,
select,
textarea,
[tabindex]:not([tabindex="-1"]) {
  position: relative;
}

/* Show focus ring on keyboard navigation, not mouse clicks */
:focus:not(:focus-visible) {
  outline: none;
}

:focus-visible {
  outline: 3px solid var(--color-slate-blue);
  outline-offset: 2px;
}

/* ============================================
   Touch Target Sizing
   ============================================ */

/* Ensure minimum 44x44px touch targets for mobile */
@media (max-width: 767px) {
  button,
  .button,
  a.button,
  input[type="submit"],
  input[type="button"],
  input[type="checkbox"],
  input[type="radio"] {
    min-height: 44px;
    min-width: 44px;
  }

  .nav-link {
    min-height: 44px;
    display: flex;
    align-items: center;
  }

  .social-link {
    min-width: 44px;
    min-height: 44px;
  }
}

/* ============================================
   Form Accessibility Enhancements
   ============================================ */

/* Required field indicator */
.required {
  color: #d32f2f;
}

/* Ensure error messages are associated with inputs */
input[aria-invalid="true"],
select[aria-invalid="true"],
textarea[aria-invalid="true"] {
  border-color: #d32f2f;
  border-width: 2px;
}

input[aria-invalid="true"]:focus,
select[aria-invalid="true"]:focus,
textarea[aria-invalid="true"]:focus {
  outline-color: #d32f2f;
  box-shadow: 0 0 0 3px rgba(211, 47, 47, 0.2);
}

/* Error message styling */
[role="alert"],
.error-message {
  color: #c62828;
  font-weight: 600;
}

/* ============================================
   ARIA Live Regions
   ============================================ */

[aria-live="polite"],
[aria-live="assertive"] {
  position: relative;
}

/* ============================================
   Image Alt Text Enforcement
   ============================================ */

/* Visually indicate images missing alt text (development only) */
/* Remove this in production */
img:not([alt]) {
  outline: 3px dashed #d32f2f;
  outline-offset: 2px;
}

/* ============================================
   Landmark Roles
   ============================================ */

/* Ensure landmarks are easily navigable */
header[role="banner"],
nav[role="navigation"],
main[role="main"],
footer[role="contentinfo"] {
  position: relative;
}

/* ============================================
   Table Accessibility
   ============================================ */

table {
  width: 100%;
  border-collapse: collapse;
}

th {
  text-align: left;
  font-weight: 600;
  background-color: var(--color-sage-green);
  color: var(--color-white);
  padding: var(--spacing-sm);
}

td {
  padding: var(--spacing-sm);
  border-bottom: 1px solid rgba(107, 127, 110, 0.2);
}

/* Ensure table headers are properly associated */
th[scope="col"],
th[scope="row"] {
  font-weight: 600;
}

/* ============================================
   Dialog/Modal Accessibility
   ============================================ */

[role="dialog"],
[aria-modal="true"] {
  position: fixed;
  z-index: 1000;
}

/* Ensure dialog backdrop is clearly visible */
.modal-backdrop {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.7);
  z-index: 999;
}

/* ============================================
   Status Messages
   ============================================ */

.success-message {
  background-color: #4caf50;
  color: var(--color-white);
  padding: var(--spacing-md);
  border-radius: var(--radius-sm);
  margin-bottom: var(--spacing-md);
}

.info-message {
  background-color: var(--color-slate-blue);
  color: var(--color-white);
  padding: var(--spacing-md);
  border-radius: var(--radius-sm);
  margin-bottom: var(--spacing-md);
}

.warning-message {
  background-color: #ff9800;
  color: var(--color-charcoal);
  padding: var(--spacing-md);
  border-radius: var(--radius-sm);
  margin-bottom: var(--spacing-md);
}

.error-message-block {
  background-color: #d32f2f;
  color: var(--color-white);
  padding: var(--spacing-md);
  border-radius: var(--radius-sm);
  margin-bottom: var(--spacing-md);
}

/* ============================================
   Print Styles (Accessibility for Print)
   ============================================ */

@media print {
  .skip-link,
  .menu-toggle,
  .social-links {
    display: none;
  }

  a[href]::after {
    content: " (" attr(href) ")";
    font-size: 0.8em;
    color: var(--color-warm-neutral);
  }

  /* Don't print button URLs */
  .button[href]::after {
    content: "";
  }
}
